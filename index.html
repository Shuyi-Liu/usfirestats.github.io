<!DOCTYPE html>
<html>
<head>
	<title>US Fire Administration Fire Statistics</title>
	<script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
   	<script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
    	<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>
<!-- 	<!-- link to main stylesheet -->
<!-- 	<link rel="stylesheet" type="text/css" href="/css/main.css"> -->
</head>
<body style="margin:20;padding:10">
<!-- 	<nav>
    	<ul>
        	<li><a href="/">Home</a></li>
	        <li><a href="/more">More</a></li>
    	</ul> 
	</nav> -->
<!-- 	<div class="container">
    	<div class="blurb"> -->
        	<h2>Visualization on US Fire Administration Fire Statistics</h2>
		<p>The datasets are from <a href="https://catalog.data.gov/dataset/us-fire-administration-fire-statistics">US Fire Administration Fire Statistics</a> and <a href="https://catalog.data.gov/dataset/fire-hydrants">Fire Hydrants</a>.</p>
		<p>See Observable notebook: <a href="https://observablehq.com/@shuyi-liu/us-fire-stats">Visualization on US Fire Administration Fire Statistics by shuyi-liu</a></p>
<!--     	</div><!-- /.blurb -->
<!--  	</div>/.container -->
	
	<h3>Chart 1: Age Distribution of Fallen Firefighters</h3>
	<p>This chart shows the distribution of fallen firefighters by their ages with a tooltip.</p>
	<div id="observablehq-agechart-af93bb0d" align="center"></div>
	
	
	<script type="module">
	import {Runtime, Inspector} from "https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js";
	import define from "https://api.observablehq.com/@shuyi-liu/us-fire-stats.js?v=3";
	new Runtime().module(define, name => {
	  if (name === "agechart") return new Inspector(document.querySelector("#observablehq-agechart-af93bb0d"));
	});
	</script>
	
	<h3>Chart 2: Cause of Death vs Nature of Death</h3>
	<p>This chart compares the relevance of firefightersâ€™ cause of death and nature of death.</p>
	<div id="observablehq-causechart-0efa0908" align="center"></div>
	
	<script type="module">
	import {Runtime, Inspector} from "https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js";
	import define from "https://api.observablehq.com/@shuyi-liu/us-fire-stats.js?v=3";
	new Runtime().module(define, name => {
	  if (name === "causechart") return new Inspector(document.querySelector("#observablehq-causechart-0efa0908"));
	});
	</script>
	
	<h3>Chart 3: Filtering Causes</h3>
	<p>When selecting an incident property type, the upper chart will show the relevance of the causes of that type.</p>
	<div align="center">
	<div id="vis"></div>
	
    	<script type="text/javascript">
		var yourVlSpec =
		    {
			  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
			  "description": "A dashboard with cross-highlighting.",
			  "data": {
				  "url": "https://raw.githubusercontent.com/Shuyi-Liu/usfirestats.github.io/main/ff_data.csv"
			  },
			  "vconcat": [
			    {
			      "layer": [
				{
				  "mark": "rect",
				  "encoding": {
				    "x": {
				      "field": "Nature_of_death",
				      "type": "ordinal",
				      "axis": {"labelAngle": -40}
				    },
				    "y": {"field": "Cause_of_death", "type": "ordinal"},
				    "color": {
				      "aggregate": "count",
				      "legend": {
					"title": "Count of Records",
					"direction": "horizontal",
					"gradientLength": 120
				      }
				    }
				  }
				},
				{
				  "transform": [{"filter": {"param": "pts"}}],
				  "mark": "point",
				  "encoding": {
				    "x": {"field": "Nature_of_death", "type": "ordinal"},
				    "y": {"field": "Cause_of_death", "type": "ordinal"},
				    "size": {
				      "aggregate": "count",
				      "legend": {"title": "Selected Category Count"}
				    },
				    "color": {"value": "#666"}
				  }
				}
			      ]
			    },
			    {
			      "width": 330,
			      "height": 120,
			      "mark": {"type":"bar", "tooltip":true},
			      "params": [
				{"name": "pts", "select": {"type": "point", "encodings": ["x"]}}
			      ],
			      "encoding": {
				"x": {"field": "Property_type", "axis": {"labelAngle": -40}},
				"y": {"aggregate": "count"},
				"color": {
				  "condition": {"param": "pts", "value": "steelblue"},
				  "value": "grey"
				}
			      }
			    }
			  ],
			  "resolve": {"legend": {"color": "independent", "size": "independent"}}
			};
		vegaEmbed('#vis', yourVlSpec);
	</script>
	</div>
	
	<h3>Chart 4: Overview and Detail on Installed Hydrants by Year/Date</h3>
	<p>This dynamic chart shows the number of installed hydrants by years.
	<br>When brushing part of the lower chart, the upper chart will zoom in on the timeline and show Months.
	</p>
	<div align="center">
	<div id="vis2"></div>
	
	<script type="text/javascript">
		var yourVlSpec2 = 
		    {
			  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
			  "data": {
			    "url": "https://raw.githubusercontent.com/Shuyi-Liu/usfirestats.github.io/main/Fire_Hydrants.csv"
			  },
			  "vconcat": [
			    {
			      "width": 480,
			      "mark": "bar",
			      "encoding": {
				"x": {
				  "field": "InstallDate",
				  "type": "temporal",
				  "scale": {"domain": {"param": "brush"}},
				  "axis": {"title": ""}
				},
				"y": {"aggregate": "count", "type": "quantitative"}
			      }
			    },
			    {
			      "width": 480,
			      "height": 60,
			      "mark": {"type": "bar", "tooltip": true},
			      "params": [
				{"name": "brush", "select": {"type": "interval", "encodings": ["x"]}}
			      ],
			      "encoding": {
				"x": {"field": "InstallDate", "type": "temporal"},
				"y": {
				  "aggregate": "count",
				  "type": "quantitative",
				  "axis": {"tickCount": 3, "grid": false}
				}
			      }
			    }
			  ]
			};
		vegaEmbed('#vis2', yourVlSpec2);
	</script>
	</div>
	
	<h3>Chart 5: Map of Lake County Public Works Water Department fire hydrants</h3>
	<p>The map shows the fire hydrants belonging to different water systems that are distinguished by color.</p>
	<p><b>You are selecting:</b></p>
	<div id="hydrantsinfo"></div>
	<div align="center">
	<div id="observablehq-hydrantmap-dc9662cd"></div>


	<script type="module">
	import {Runtime, Inspector} from "https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js";
	import define from "https://api.observablehq.com/@shuyi-liu/us-fire-stats.js?v=3";
	new Runtime().module(define, name => {
	  if (name === "hydrantmap") return new Inspector(document.querySelector("#observablehq-hydrantmap-dc9662cd"));
	});
	</script>
</body>
</html>
